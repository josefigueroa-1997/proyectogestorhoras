@{
    decimal ingresoq1 = 0;
    decimal ingresoq2 = 0;
    decimal ingresoq3 = 0;
    decimal ingresoq4 = 0;
    decimal sociosq1 = 0;
    decimal sociosq2 = 0;
    decimal sociosq3 = 0;
    decimal sociosq4 = 0;
    decimal staffq1 = 0;
    decimal staffq2 = 0;
    decimal staffq3 = 0;
    decimal staffq4 = 0;
    decimal externosq1 = 0;
    decimal externosq2 = 0;
    decimal externosq3 = 0;
    decimal externosq4 = 0;
    decimal serviciosq1 = 0;
    decimal serviciosq2 = 0;
    decimal serviciosq3 = 0;
    decimal serviciosq4 = 0;
    decimal gastosq1 = 0;
    decimal gastosq2 = 0;
    decimal gastosq3 = 0;
    decimal gastosq4 = 0;
    decimal margenq1 = 0;
    decimal margenq2 = 0;
    decimal margenq3 = 0;
    decimal margenq4 = 0;
    decimal bonoq1 = 0;
    decimal bonoq2 = 0;
    decimal bonoq3 = 0;
    decimal bonoq4 = 0;
    foreach (var q in ViewBag.Quarter)
    {
        if (q.Quarter == 1)
        {
            ingresoq1 += q.Ingresos;
            sociosq1 += q.CostoSocios;
            staffq1 += q.CostoStaff;
            externosq1 += q.CostoConsultorA + q.CostoConsultorB + q.CostoConsultorC;
            serviciosq1 += q.TotalServicios;
            gastosq1 += q.TotalGastos;
            margenq1 += q.Margen;
            bonoq1 += q.BonoSocios;
        }
        if (q.Quarter == 2)
        {
            ingresoq2 += q.Ingresos;
            sociosq2 += q.CostoSocios;
            staffq2 += q.CostoStaff;
            externosq2 += q.CostoConsultorA + q.CostoConsultorB + q.CostoConsultorC;
            serviciosq2 += q.TotalServicios;
            gastosq2 += q.TotalGastos;
            margenq2 += q.Margen;
            bonoq2 += q.BonoSocios;
        }
        if (q.Quarter == 3)
        {
            ingresoq3 += q.Ingresos;
            sociosq3 += q.CostoSocios;
            staffq3 += q.CostoStaff;
            externosq3 += q.CostoConsultorA + q.CostoConsultorB + q.CostoConsultorC;
            serviciosq3 += q.TotalServicios;
            gastosq3 += q.TotalGastos;
            margenq3 += q.Margen;
            bonoq3 += q.BonoSocios;
        }
        if (q.Quarter == 4)
        {
            ingresoq4 += q.Ingresos;
            sociosq4 += q.CostoSocios;
            staffq4 += q.CostoStaff;
            externosq4 += q.CostoConsultorA + q.CostoConsultorB + q.CostoConsultorC;
            serviciosq4 += q.TotalServicios;
            gastosq4 += q.TotalGastos;
            margenq4 += q.Margen;
            bonoq4 += q.BonoSocios;
        }
    }
}
<h1 class="text-xl font-bold mb-4 text-center">Resumen por Quarter</h1>
<h1 class="text-xl font-bold mb-4 text-center">Año: @DateTime.Now.Year</h1>

<div class="bg-white border border-black rounded-lg shadow-md p-4 mb-6">
    <table class="min-w-full border-collapse border border-black">
        <thead class="bg-yellow-200">
            <tr>
                <th class="text-left text-xs font-medium ">Tipo</th>

                <th class="text-left text-xs font-medium ">Q1</th>
                <th class="text-left text-xs font-medium ">Q2</th>
                <th class="text-left text-xs font-medium ">Q3</th>
                <th class="text-left text-xs font-medium ">Q4</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="text-left text-xs font-medium ">Ingresos</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @ingresoq1)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @ingresoq2)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @ingresoq3)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @ingresoq4)</td>
            </tr>
            <tr>
                <td class="text-left text-xs font-medium ">Costo HH_Socios</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @sociosq1)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @sociosq2)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @sociosq3)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @sociosq4)</td>
            </tr>
            <tr>
                <td class="text-left text-xs font-medium ">Costo HH_Leads</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @staffq1)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @staffq2)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @staffq3)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @staffq4)</td>
            </tr>
            <tr>
                <td class="text-left text-xs font-medium ">Costo Consultores Externos</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @externosq1)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @externosq2)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @externosq3)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @externosq4)</td>
            </tr>
            <tr>
                <td class="text-left text-xs font-medium ">Total Servicios</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @serviciosq1)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @serviciosq2)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @serviciosq3)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @serviciosq4)</td>
            </tr>
            <tr>
                <td class="text-left text-xs font-medium ">Total Gastos</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @gastosq1)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @gastosq2)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @gastosq3)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @gastosq4)</td>
            </tr>
            <tr>
                <td class="text-left text-xs font-medium ">Margen de Contribución</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @margenq1)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @margenq2)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @margenq3)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @margenq4)</td>
            </tr>
            <tr>
                <td class="text-left text-xs font-medium ">Bonos Socios</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @bonoq1)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @bonoq2)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @bonoq3)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @bonoq4)</td>
            </tr>
        </tbody>
    </table>
</div>
    @{
        decimal ingresoq1a = 0;
        decimal ingresoq2a = 0;
        decimal ingresoq3a = 0;
        decimal ingresoq4a = 0;
        decimal sociosq1a = 0;
        decimal sociosq2a = 0;
        decimal sociosq3a= 0;
        decimal sociosq4a = 0;
        decimal staffq1a = 0;
        decimal staffq2a = 0;
        decimal staffq3a = 0;
        decimal staffq4a = 0;
        decimal externosq1a = 0;
        decimal externosq2a = 0;
        decimal externosq3a = 0;
        decimal externosq4a = 0;
        decimal serviciosq1a = 0;
        decimal serviciosq2a = 0;
        decimal serviciosq3a = 0;
        decimal serviciosq4a = 0;
        decimal gastosq1a = 0;
        decimal gastosq2a = 0;
        decimal gastosq3a = 0;
        decimal gastosq4a = 0;
        decimal margenq1a = 0;
        decimal margenq2a = 0;
        decimal margenq3a = 0;
        decimal margenq4a = 0;
        decimal bonoq1a =0;
        decimal bonoq2a = 0;
        decimal bonoq3a = 0;
        decimal bonoq4a= 0;
        foreach (var q in ViewBag.QuarterAnio)
        {
            if (q.Quarter == 1)
            {
                ingresoq1a += q.Ingresos;
                sociosq1a += q.CostoSocios;
                staffq1a += q.CostoStaff;
                externosq1a += q.CostoConsultorA + q.CostoConsultorB + q.CostoConsultorC;
                serviciosq1a += q.TotalServicios;
                gastosq1a += q.TotalGastos;
                margenq1a += q.Margen;
                bonoq1a += q.BonoSocios;
            }
            if (q.Quarter == 2)
            {
                ingresoq2a += q.Ingresos;
                sociosq2a += q.CostoSocios;
                staffq2a += q.CostoStaff;
                externosq2a += q.CostoConsultorA + q.CostoConsultorB + q.CostoConsultorC;
                serviciosq2a += q.TotalServicios;
                gastosq2a += q.TotalGastos;
                margenq2a += q.Margen;
                bonoq2a += q.BonoSocios;
            }
            if (q.Quarter == 3)
            {
                ingresoq3a += q.Ingresos;
                sociosq3a += q.CostoSocios;
                staffq3a += q.CostoStaff;
                externosq3a += q.CostoConsultorA + q.CostoConsultorB + q.CostoConsultorC;
                serviciosq3a += q.TotalServicios;
                gastosq3a += q.TotalGastos;
                margenq3a += q.Margen;
                bonoq3a += q.BonoSocios;
            }
            if (q.Quarter == 4)
            {
                ingresoq4a += q.Ingresos;
                sociosq4a += q.CostoSocios;
                staffq4a += q.CostoStaff;
                externosq4a += q.CostoConsultorA + q.CostoConsultorB + q.CostoConsultorC;
                serviciosq4a += q.TotalServicios;
                gastosq4a += q.TotalGastos;
                margenq4a += q.Margen;
                bonoq4a += q.BonoSocios;
            }
        }
    }

    <h1 class="text-xl font-bold mb-4 text-center">Resumen por Quarter</h1>
    @{
        int? anio = Context.Session.GetInt32("anio");
    }
    <h1 class="text-xl font-bold mb-4 text-center">Año: @anio</h1>

    <div class="bg-white border border-black rounded-lg shadow-md p-4 mb-6">
        <table class="min-w-full border-collapse border border-black">
            <thead class="bg-green-200">
                <tr>
                <th class="text-left text-xs font-medium ">Tipo</th>

                <th class="text-left text-xs font-medium ">Q1</th>
                <th class="text-left text-xs font-medium ">Q2</th>
                <th class="text-left text-xs font-medium ">Q3</th>
                <th class="text-left text-xs font-medium ">Q4</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <td class="text-left text-xs font-medium ">Ingresos</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @ingresoq1a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @ingresoq2a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @ingresoq3a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @ingresoq4a)</td>
                </tr>
                <tr>
                <td class="text-left text-xs font-medium ">Costo HH_Socios</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @sociosq1a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @sociosq2a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]" >@String.Format("{0:N2}", @sociosq3a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @sociosq4a)</td>
                </tr>
                <tr>
                <td class="text-left text-xs font-medium ">Costo HH_Leads</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @staffq1a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @staffq2a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @staffq3a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @staffq4a)</td>
                </tr>
                <tr>
                <td class="text-left text-xs font-medium "> Costo Consultores Externos</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @externosq1a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @externosq2a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @externosq3a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @externosq4a)</td>
                </tr>
                <tr>
                <td class="text-left text-xs font-medium ">Total Servicios</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @serviciosq1a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @serviciosq2a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @serviciosq3a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @serviciosq4a)</td>
                </tr>
                <tr>
                <td class="text-left text-xs font-medium ">Total Gastos</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @gastosq1a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @gastosq2a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @gastosq3a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @gastosq4a)</td>
                </tr>
                <tr>
                <td class="text-left text-xs font-medium ">Margen de Contribución</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @margenq1a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @margenq2a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @margenq3a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @margenq4a)</td>
                </tr>
                <tr>
                <td class="text-left text-xs font-medium ">Bonos Socios</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @bonoq1a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @bonoq2a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @bonoq3a)</td>
                <td class="text-xs border font-medium text-right border-black px-4 py-2 min-w-[150px]">@String.Format("{0:N2}", @bonoq4a)</td>
                </tr>
            </tbody>
        </table>
    </div>
